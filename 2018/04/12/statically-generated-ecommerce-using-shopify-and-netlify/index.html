<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/public/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="http://gmpg.org/xfn/11" rel="profile">

    <title>
      Statically generated e-commerce using Shopify and Netlify &middot; 
      Zápisník Josefa Rouska
    </title>

    <meta content="Zápisník Josefa Rouska" property="og:site_name">
    
      <meta content="Statically generated e-commerce using Shopify and Netlify" property="og:title">
    
    
      <meta content="article" property="og:type">
      <meta property="article:author" content="https://www.facebook.com/josef.rousek" />
    
    
      <meta name="description" content="I recently fell in love with Netlify because of its simplicity and speed. Nelify allows you to build and host your website in one place with generous pricing levels. I wanted to explore what are possibilities when it comes to e-commerce so I decided to create a simple statically generated website where I could sell some products.
">
      <meta content="I recently fell in love with Netlify because of its simplicity and speed. Nelify allows you to build and host your website in one place with generous pricing levels. I wanted to explore what are possibilities when it comes to e-commerce so I decided to create a simple statically generated website where I could sell some products.
" property="og:description">
    
    
      <meta content="https://blog.rousek.name/2018/04/12/statically-generated-ecommerce-using-shopify-and-netlify/" property="og:url">
    
    
      <meta content="2018-04-12T00:00:00-05:00" property="article:published_time">
    
    

    <!-- CSS -->
    <link rel="stylesheet" href="/public/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface&subset=latin,latin-ext">

    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/public/favicon.png">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  </head>
  <body>

    <header class="masthead">
      <div class="masthead-inner">
        <h1><a href="/">Zápisník Josefa Rouska</a></h1>
        <p class="lead">Python a React.js programátor, zaměřený na Shopify integrace</p>

        <div class="colophon">
          <ul class="colophon-links">
            <li><a href="https://rousek.name/">about</a></li>
            <li><a href="https://github.com/stlk">github</a></li>
            <li><a href="https://twitter.com/josefrousek">twitter</a></li>
          </ul>
        </div>

      </div>
    </header>

    <div class="content container">
      <div class="post">
  <h1>Statically generated e-commerce using Shopify and Netlify</h1>
  <span class="post-date">12 Apr 2018</span>
  <p>I recently fell in love with Netlify because of its simplicity and speed. Nelify allows you to build and host your website in one place with generous pricing levels. I wanted to explore what are possibilities when it comes to e-commerce so I decided to create a simple statically generated website where I could sell some products.</p>

<p>As a Shopify fan, I will try to use Shopify to manage my products and orders. Shopify offers a pricing plan called <a href="https://www.shopify.com/lite">Shopify Lite</a> for $9 per month. Most notable features of this plan are Buy Button and Facebook Messenger sales channels.</p>

<p>I will use their GraphQL API to retrieve the products. With data from Shopify, I will generate static website containing product list and <a href="https://github.com/Shopify/buy-button-js">BuyButton.js</a> code. Let’s see how it fits together.</p>

<h2 id="setting-up">Setting up</h2>

<p>Let’s start by creating Store in Shopify. Then add new sales channel called Buy Button. Now you need to find API token so you can use the API. To get there select a product and then click <em>Generate code</em>. In the generated script find and copy <code class="language-plaintext highlighter-rouge">domain</code> and <code class="language-plaintext highlighter-rouge">apiKey</code>.</p>

<p><a href="/public/shopify_buy_button_code.png" target="_blank">
  <img src="/public/shopify_buy_button_code.png" alt="" class="post__image post__image-full-width" />
</a></p>

<p>With the credentials from the script, we can focus on Netlify. First fork my project from <a href="https://github.com/stlk/shopify-buy-button">github.com/stlk/shopify-buy-button</a> so you can add it to your Netlify account. In the Netlify <em>site Settings</em> go to <em>Build &amp; deploy</em> and the to <em>Build environment variables</em> section. While in there fill in <code class="language-plaintext highlighter-rouge">SHOPIFY_SHOP_DOMAIN</code> (only the part before <code class="language-plaintext highlighter-rouge">.myshopify.com</code>) and <code class="language-plaintext highlighter-rouge">SHOPIFY_STOREFRONT_TOKEN</code>.</p>

<p><a href="/public/netlify_env_variables.png" target="_blank">
  <img src="/public/netlify_env_variables.png" alt="" class="post__image post__image-full-width" />
</a></p>

<p>You can now check Deploys section to see if the build succeeded. If not, try rebuilding using <em>Trigger deploy</em>. After the build is published you can visit your e-shop!</p>

<p class="post__image-center">
  <img src="/public/checkout.gif" alt="" class="post__image post__image-full-width" />
</p>

<p>But do not rejoice! You still have one last step to make Netlify rebuild the site after you change or create the product in Shopify.</p>

<p>This is just the right job for webhooks. In our favourite section <em>Build &amp; deploy</em> in Netlify’s Settings create a new <em>Build hook</em>. Keep the branch setting on master. This creates a unique URL that will cause your site to rebuild when POST request hits. We will use this URL in Shopify.</p>

<p><a href="/public/netlify_webhooks.png" target="_blank">
  <img src="/public/netlify_webhooks.png" alt="" class="post__image post__image-full-width" />
</a></p>

<p>In your Shopify Store administration go to <em>Settings</em> &gt; <em>Notifications</em> and scroll down to <em>Webhooks</em>. In there create three webhooks for <code class="language-plaintext highlighter-rouge">Product creation</code>, <code class="language-plaintext highlighter-rouge">Product update</code> and <code class="language-plaintext highlighter-rouge">Product deletion</code> point all three to the <em>Build hook</em> we just created. Don’t the format setting as we aren’t reading any data from it.</p>

<p><a href="/public/shopify_webhooks.png" target="_blank">
  <img src="/public/shopify_webhooks.png" alt="" class="post__image post__image-full-width" />
</a></p>

<p>Hope this helped you explore unusual take on building e-commerce site. If you want to find out more about internals, keep reading.</p>

<h2 id="how-did-we-get-the-data-from-shopify">How did we get the data from Shopify</h2>

<p>The script uses <a href="https://help.shopify.com/api/storefront-api/getting-started#accessing-the-storefront-api-graphql-endpoint">Storefront API GraphQL</a> which lets us to specify exactly what data we need. You can play around with data from example shop using <a href="https://help.shopify.com/api/storefront-api/graphql-explorer/graphiql">GraphiQL</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  shop {
    name
    products(first: 10) {
      edges {
        node {
          id
          title
          descriptionHtml
          images(first: 1) {
            edges {
              node {
                originalSrc
              }
            }
          }
        }
      }
    }
  }
}
</code></pre></div></div>

<p>You can see it in action in <code class="language-plaintext highlighter-rouge">build.py</code> on <a href="https://github.com/stlk/shopify-buy-button/blob/master/build.py#L25">GitHub</a>.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2021/03/13/websockets-on-django-and-react/">
            Websockets on Django and React
            <small>13 Mar 2021</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/08/09/high-speed-request-filtering-using-cloudflare-workers/">
            Hi-speed request filtering using Cloudflare Workers
            <small>09 Aug 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/07/16/pipenv-is-great/">
            Pipenv is great
            <small>16 Jul 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>
    <!-- Fathom - beautiful, simple website analytics -->
    <script src="https://cdn.usefathom.com/script.js" data-site="NAKOBGAG" defer></script>
    <!-- / Fathom -->
  </body>
</html>
